{% extends 'kmap/base.html' %}
{% load static %}
{% load keymap_tags %}

{% block content %}

  <!--region –ë–ª–æ–∫ UserGuide –ø—Ä–∏ –Ω–µ–≤—ã–±—Ä–∞–Ω–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º–µ-->
  {% if prog_selected == 0 %}
    <div class="userGuide">
      <!--region –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ -->
      <div class="userGuide__Item">
        <h2 style="text-align: center"> –ü—Ä–æ —á—Ç–æ —ç—Ç–æ—Ç —Å–∞–π—Ç?</h2>

        <p>
          –°–µ—Ä–≤–∏—Å –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Å–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–π –∫–æ–º–∞–Ω–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ —Å –ø–æ—Å–ª–µ–¥—É—é—â–µ–π —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π
          –≤ –≤—ã–±—Ä–∞–Ω–Ω—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É. –¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å —Ä–µ–¥–∞–∫—Ç–æ—Ä, –∫–∞–∫ —Å–ø–æ—Å–æ–± –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —à—Ç–∞—Ç–Ω—ã—Ö
          –∫–æ–º–±–∏–Ω–∞—Ü–∏–π –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º–µ.
        </p>

        <h3 style="text-align: center">–ö–∞–∫ –æ–±—ã—á–Ω–æ –≤—ã–≥–ª—è–¥–∏—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ keybindings map?</h3>

        <img src="https://user-images.githubusercontent.com/83884504/178107126-2b3efba1-7838-4998-9c79-ecc5332d4f55.png"
             style="width:100% ">

        <p>–£–º–Ω–æ–∂–∞–µ–º —Å–∫—Ä–∏–Ω—à–æ—Ç –µ—â–µ –Ω–∞ 10, –∏ –ø–æ–ª—É—á–∞–µ—Ç—Å—è –æ–≥—Ä–æ–º–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ —Å–ø–∏—Å–æ–∫ –≤ –∫–æ—Ç–æ—Ä–æ–º –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ —É—Ç–æ–Ω—É—Ç—å, –∏ –æ—á–µ–Ω—å
           —Å–ª–æ–∂–Ω–æ —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è.
           –ö–∞–∫ —Å–ª–µ–¥—Å—Ç–≤–∏–µ, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–∏—Å—Ç–µ–º–Ω–æ—Å—Ç–∏/—É–¥–æ–±—Å—Ç–≤–∞/–ª–æ–≥–∏—á–Ω–æ—Å—Ç–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π.
        </p>
      </div>
      <!--endregion -->

      <!--region –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞-->
      <div class="userGuide__Item">
        <h2 style="text-align: center"> –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º–∞—è –º–æ–¥–µ–ª—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è:</h2>
        <ul>
          <li>–í—ã–±–∏—Ä–∞–µ–º –ø—Ä–æ–≥—Ä–∞–º–º—É</li>
          <li>–ó–∞–≥—Ä—É–∂–∞–µ—à—å —Å–≤–æ–π keymap-—Ñ–∞–π–ª –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º—ã.</li>
          <li>keymap-—Ñ–∞–π–ª –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –∏ –∫–æ–º–∞–Ω–¥—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –ø–æ —Å–µ—Ç–∫–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏
              —Å –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–º–∏ –Ω–∞ –Ω–∏—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏—è–º–∏.
          </li>
          <img src="https://user-images.githubusercontent.com/83884504/178106341-3d7b71cf-f338-422d-a358-b421f37097ab.png"
               style="max-width:100%; max-height:130px">

          <li>–ö–æ–º–∞–Ω–¥—ã –±–µ–∑ –∫–æ–º–±–∏–Ω–∞—Ü–∏–π –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è –≤ –ø—É–ª–µ –∫–æ–º–∞–Ω–¥.</li>

          <li>–ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–π—Ç–µ –º—ã—à–∫–æ–π (drag&drop) –∫–æ–º–∞–Ω–¥—ã/–∑–Ω–∞—á–∫–∏ –∫–æ–º–∞–Ω–¥, –Ω–∞—Ö–æ–¥—è—â–∏–µ—Å—è –Ω–∞ —Å–µ—Ç–∫–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –≤
              —É–¥–æ–±–Ω–æ–µ/–ª–æ–≥–∏—á–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ.
          </li>

          <li>–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è keymap-—Ñ–∞–π–ª —Å –Ω—É–∂–Ω—ã–º–∏/—É–¥–æ–±–Ω—ã–º–∏ –∫–æ–º–±–∏–Ω–∞—Ü–∏—è–º–∏.</li>

          <li>–ß—Ç–æ–±—ã –∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –Ω–µ –±—ã–ª–æ –¥–æ–ª–≥–∏–º –∏ –º—É—á–∏—Ç–µ–ª—å–Ω—ã–º, —Ä–∞—Å–ø–µ—á–∞—Ç—ã–≤–∞–µ–º keymap –∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ–º –µ–≥–æ –Ω–∞ –≤–∏–¥–Ω–æ–µ –º–µ—Å—Ç–æ
              —Ä—è–¥–æ–º —Å –º–æ–Ω–∏—Ç–æ—Ä–æ–º.
          </li>
        </ul>
      </div>
      <!--endregion -->
    </div>
  {% endif %}
  <!--endregion -->

  {% if error_message %}
    <h1>{{ error_message }}</h1>
  {% endif %}

  <!--region –ë–ª–æ–∫ —Å–æ –º–Ω–æ–≥–æ–∫–æ–ª–æ–Ω–æ—á–Ω—ã–º —Å–ø–∏—Å–∫–æ–º –¥–µ–π—Å—Ç–≤–∏–π, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –Ω–∞–∑–Ω–∞—á–µ–Ω—ã –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏-->
  <div class="actionList droppable">

    <!--region –ï—Å–ª–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–µ –≤—ã–±—Ä–∞–Ω–∞, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ñ—É—Ç–±–æ–ª—å–Ω—ã–π –º—è—á–∏–∫-->
    {% if prog_selected == 0 %}
      <div class=""><img class="actionList_actionIcon" id="ball" src="{% static 'kmap/i/ball.svg' %}"></div>
    {% endif %}
    <!--endregion -->

    <!--region –ï—Å–ª–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –≤—ã–±—Ä–∞–Ω–∞, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–µ–π—Å—Ç–≤–∏—è, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –Ω–∞–∑–Ω–∞—á–µ–Ω—ã –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏-->
    {% for action in acts_wo_combs %}
      <div class="actionList__item" title="{{ action.descr }}">
        <div class="actionList__repr">
          {% if action.icon %}
            <img class='actionList_actionIcon' src="{{ action.icon.url }}"/>
          {% endif %}
          {{ action.short_name }}
        </div>
      </div>
    {% endfor %}
    <!--endregion -->

  </div>
  <!--endregion-->

  <!--region –ö–ª–∞–≤–∏–∞—Ç—É—Ä–Ω–∞—è —Å–µ—Ç–∫–∞, –≥–¥–µ –∫–∞–∂–¥–∞—è –∫–ª–∞–≤–∏—à–∞ —Ä–∞–∑–¥–µ–ª–µ–Ω–∞ –Ω–∞ –ø–æ–ª—è —Å –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞–º–∏-->
  <div id="keyboardGrid" class="keyboard">
    {% for button_backname, mod_keys in k_buttons.items %}
      {% if mod_keys.front_name != '' %}
        <div class="keyboard__button">
          <div class="keyboard__buttonName "> {{ mod_keys.front_name }}</div>
          <div class="keyboard__a_mod  keyboard__modLabel">a</div>
          <div class="keyboard__c_mod  keyboard__modLabel">c</div>
          <div class="keyboard__s_mod  keyboard__modLabel">s</div>
          <div class="keyboard__ac_mod  keyboard__modLabel">ca</div>
          <div class="keyboard__as_mod  keyboard__modLabel">as</div>
          <div class="keyboard__cs_mod  keyboard__modLabel">cs</div>
          <div class="keyboard__acs_mod  keyboard__modLabel">cas</div>

          <!--–î–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–≤ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–π –Ω–∞ "—Å–∏–º–≤–æ–ª" –∏–ª–∏ "Shift+—Å–∏–º–≤–æ–ª" -->
          {% if button_backname in bounded_buttons %}
            <div class="keyboard__push keyboard__bounded_button" data-button="{{ button_backname }}"
                 data-modkeys="push">{{ mod_keys.push }}</div>
            <div class="keyboard__s  keyboard__bounded_button" data-button="{{ button_backname }}"
                 data-modkeys="s">{{ mod_keys.s }}</div>

          {% else %}
            {% if  button_backname != 'f1' %}
              <div class="keyboard__push  droppable" data-button="{{ button_backname }}"
                   data-modkeys="push">{{ mod_keys.push }}</div>
              <div class="keyboard__s  droppable" data-button="{{ button_backname }}"
                   data-modkeys="s">{{ mod_keys.s }}</div>
            {% else %}
              <div class="keyboard__push  keyboard__bounded_button" data-button="{{ button_backname }}"
                   data-modkeys="push">üíªüîí
              </div>
            {% endif %}

          {% endif %}

          <div class="keyboard__a  droppable" data-button="{{ button_backname }}"
               data-modkeys="a"> {{ mod_keys.a }}</div>

          <div class="keyboard__c  droppable" data-button="{{ button_backname }}"
               data-modkeys="c"> {{ mod_keys.c }}</div>

          {% if button_backname == "delete" %}
            <div class="keyboard__ac keyboard__bounded_button " data-button="{{ button_backname }}"
                 data-modkeys="ac">üíªüîí
            </div>
          {% else %}
            <div class="keyboard__ac  droppable" data-button="{{ button_backname }}"
                 data-modkeys="ac">{{ mod_keys.ac }}</div>
          {% endif %}
          <div class="keyboard__as  droppable" data-button="{{ button_backname }}"
               data-modkeys="as">{{ mod_keys.as }}</div>

          <div class="keyboard__cs  droppable" data-button="{{ button_backname }}"
               data-modkeys="cs">{{ mod_keys.cs }}</div>

          <div class="keyboard__acs  droppable" data-button="{{ button_backname }}"
               data-modkeys="acs">{{ mod_keys.acs }}</div>
        </div>
      {% else %}
        <div class="keyboard__button"></div>
      {% endif %}
    {% endfor %}
  </div>
  <!--endregion-->

  {% if prog_selected and not error_message %}
    <button type="button" class="button_download_keymap" id="button_download_keymap" value="">–°–∫–∞—á–∞—Ç—å keymap</button>
    <script>
        var csrftoken = '{{ csrf_token }}';
        const url = '{% url "keymap_saver" prog_selected.slug %}'
    </script>
  {% endif %}

{% endblock content %}

